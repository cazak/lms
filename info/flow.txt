План:
Создать окружение
Создать бэкенд (модули, тесты, сущности)
Создать фронтенд (натяжка верстки, Query запросы, контроллеры)
Создать АПИ







Курс:
Айди
Аватар
Название
Описание
Длинное описание
Категория
Цена
цена со скидкой (если есть)
Кол-во студентов
Включен ли сертификат
Автор
Кол-во часов контента (из подсущностей модулей/лекций будет считаться и записываться отдельным полем в курс, для того чтобы можно было легко в Query без вложенных запросов легко считать/сортировать)
Кол-во модулей, лекций (просто count, без отдельного поля)
Есть ли downloadable resources (может не нужно отдельное поле)
Время доступа курса
Средняя оценка (рейтинг, тоже в поле хранится, считается как среднее из отзывов)
Требования (requirements) к курсу (подготовка)
Уровень курса (advanced, beginner...)
Skills you'll gain (категория - фронт, бэк, базы данных, и под категория, например react, php, mongodb)
Язык курса
Вопросы к курсу // В лекции будет
Домашние задания (может к модулю или к лекциям относиться будут)
Updated at
Created at
Для курса наверное не нужен сам автор, а сделать сущность course_author (ну например) где будут только необходимые поля которые нужны самому курсу.
То есть для модуля нужно задавать вопрос: какие данные ему нужны которые содержатся в других модулях, и брать создавать для этого сущность которая будет дублировать другой модуль, но только с необходимой информацией.
Хотя нет, нужен именно автор скорее всего, иначе будут проблемы с счетом курсов автора. Ну или наоборот ок, можно просто для чтения по айди искать, а при сохранении в агрегате автора нет необходимости именно курсы его держать, это отдельная сущность так-то.
В итоге решил что будет просто AuthorId и все. Т.к. инфа для чтения только нужна, а ID просто найти автора и в Query все сделать уже.






Модуль:
Айди
Название
Лекции
Курс
Время модуля (сумма из лекций)
Домашнее задание(?)



Лекция:
Айди
Название
Модуль
Тип (видео или текст)
Контент (видео или текст)
Длительность лекции
Домашнее задание(?)
Вопросы



Вопросы:
Айди
Лекция
Имя вопроса
Варианты ответа
Правильный ответ





Автор:
Айди
Имя
Автар
Специализация
About
Экспертиза
Степень (PhD...)
Кол-во лет учительства
Курсы - не нужно делать связи, т.к. это только для чтения, а для записи это не агрегат чтобы вместе и зависимо друг от друга сохранять
Рейтинг преподавателя (среднее из его курсов)
Отзывы
Ученики
Соц. сети
Почта
Телефон
Адрес
Награды/образование
Опыт работы
Working hours/days





Студент:
Айди
Имя
Аватар
Сертификаты
Пройденные курсы


Прохождение курса:
Айди
Курс
Сертификат
Прогресс (кол-во вопросов делить на правильные ответы), от 0 до 100



Прогресс:
Айди
Курс
Вопросы
Процент





Курс
Модуль
Лекция
Отзывы
Пользователь
Автор
Ученик
Вишлист курсов
Комментарий
Вопросы к лекции (для отслеживания прогресса)
Прогресс
Баланс
Категории (для специализаций, курсов и т.д.)



Фронтенд страницы:
Домашняя страница

Страница курсов
Страница просмотра курса

Страница авторов
Страница автора

Страница оформления подписки

Страница регистрации
Страница логина

Страница личного кабинета
Страница редактирования себя (автора, ученика)

Страницы для авторов:
Создание курса
Редактирование курса
Мои курсы

Пополнение баланса (авторам деньги также поступают на счет от покупок их курсов)
Вывод баланса
История баланса (вывод, пополнение, пополнение денег от покупок курсов у автора)


Админские страницы:
Каталоги: соц. сетей, курсов, экспертизы авторов, специализации авторов (у админа непосредственно)



Потом уже добавить блог, поиск полнотекстовый и elasticsearch





Процессы:

1. Записанный курс:
Курс записывается полностью, то есть при создании нужно добавить модули и лекции.
Можно потом изменить что захочется. Это статус черновика. Потом идет окончательная публикация (автор решает публиковать), тут идет авто модерация и статус паблишед, доступен к продаже.

2. Потоковый курс:
Курс заполняется модульно с обозначением лекций. Потом идет публикация (автор решает публиковать), тут этап авто модерации.
Дальше окончательная публикация (он доступен к продаже в конкретное окно дат).
После старта курса модули должны быть заполнены в определенные дни перед следующим этапом, если этого не произошло (просрочилась дата), то деньги с курса возвращаются тем кто купил его, но перед этим есть штрафное время в 24 часа, и это если проблема на стороне автора, вдруг он отправил нажать, а видео просто долго грузится.
Нужно на статусы ориентироваться, если дата просрочилась и прошло 24 часа, а статус до сих пор не отправлен, то тогда возврат, если статус оправлен или в процессе и т.д. то проблема на стороне сервера (drafted -> "отправлен" -> processed -> done). Если все ок и курс дошел до конца то деньги с резерва идут к автору.


То есть событие курс создался (прошел черновик) -> event подхватывает авто модерация.
Также модераторам (и админам) доступна проверка курсов (всего контента и т.д.), если что-то не так то он может его заблокировать с указанием причины.
Записанный курс доступный к продаже меняется так: проходит авто модерацию и помечается как измененный в админке для ручной модерации, если все ок то обновляется, до этого момента покупатели видят старую версию.
После публикации (выхода из черновика) и доступа к продаже каждое изменение курса создает его копию до изменения.

У пользователя есть возможность отказаться от курса с возвратом средств в течение 7 дней. Если дата прошла то деньги идут к автору (если потоковый от остаются в резерве).

Как записывать лекции, загружать их у записнного курса, при создании? Не будет ли нагрузки большой? В AWS хранить их (текстовые и видео лекции) Можно ли бесплатно для пет проекта?




Процессы по модулям:
1. Курс
Курс создается, редактируется и т.д. Можно создавать модули и лекции. Когда автор посчитае что курс готов он может его опубликовать. Статус "на модерации"
Начинается процесс авто-модерации, если что-то не так то курсу ставится статус "не прошел модерацию" и автор получает сообщение что не так.
Если все ок или исправлено то статус "опубликован". Дальше автор может начать продажи.

2. Продажи
Когда курс выставляется на продажу то он становится доступным к покупке сразу или в указанные даты (потоковый).


Просмотр курса:
У курса либо выдается сертификат либо нет
У курса есть временной доступ (может быть пожизненным)

Сертификат выдается если прогресс курса > 85 процентов и был дан ответ на все уроки.





Финансы/денежные операции
Пополнение счета
Вывод денег со счета
Покупка курса (резерв, снятие у студента и пополнение резерва автора)
Возврат денег при отказе от курса
Перевод денег с резерва автору

Flow денег при покупке курса:
Деньги уходят у покупателя и идут в резерв.
У покупателя такая история: покупка курса (можно добавить кнопку о возврате средств и дата возможности возврата)
У продавца такая история: продажа курса, статус Pending (дата когда деньги придут на счет с учетом комиссии), либо если от курса отказались то статус Canceled
Продавец в балансе видит актуальную сумму, доступную для вывода, и сумму потенциальную (всего) (замороженную) от продаж

Flow денег при пополнении, UI:
Пользователь вводит кол-во долларов и карту для оплаты, оплачивает


UI:
Просмотр баланса
История операций (покупка показывается как минус - красным, возврат как плюс - зеленым)
Возможность фильтрации: покупки, возвраты, пополнения, выводы




Сейчас сделать заглушку для платежей. То есть фек эндпоинт для начисления баланса. Без заморочек по PaymentData и др.
Это все будет потом, пока функционал для транзакций, не границ (ввода/вывода)




Денежные операции:
Баланс:
Айди
Владелец



Операция:
Айди
Баланс
Тип операции (продажа, покупка, вывод)
Статус (возврат, успех, pending)


Платежные данные:
Айди
Карта



Резерв:
Айди



Продажи:
Айди
