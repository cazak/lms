## Финансы

### Баланс (Balance)
Просто баланс, там деньги и владелец. Через него создаётся любая транзакция

### Транзакция (Transaction)
Любая операция это транзакция, транзакция должна создаваться только в самом балансе через `increase`, `decrease`

### Покупка (Purchase)
Имеет статусы `Active`, `Cancel`, `Completed`.

При покупке создаётся `Резерв`. Также создается `Прохождение курса` (`Schedule`)

Статус `Completed` идет после того как по крону найдется `Покупка` у которой expiredAt <= time().
Возврат уже сделать нельзя

При статусе `Cancel` завершается `Schedule` (по событию), создается `Возврат` и деньги возвращаются (вызов обратный - из другого модуля (`Refund`) когда все отменяется вызывается уже `Cancel` у `Purchase` через commandBus)

Поля:
1. Айди
2. Курс
3. Покупатель
4. Продавец
5. Статус

### Возврат (Refund)
При возврате `Покупка` отменяется, соответственно `Schedule`  тоже

Поля:
1. Айди
2. Курс
3. Покупатель
4. Резерв
5. Продавец
6. Статус


## Flow:

При покупке курса (модуль `Sales`):
Создание `Schedule`

При отказе от курса (модуль `Sales`):
`Schedule` статус - отменен

При покупке курса после 7-ми дней (модуль `Sales`):
Деньги с резерва идут автору

При прохождении курса, т.е. после каждого события ответа на вопрос (модуль `Schedule`):
Выдача сертификата если курс такое предоставляет и после выполнения условий процента выполнения заданий

